// game.add.sprite: Adds a new sprite object to the game world
//


var game = new Phaser.Game(800, 600, Phaser.AUTO, 'animation', { preload: preload, create: create, update: update }, true);

function preload() {
    game.load.spritesheet('alien', "<%= asset_path 'alientwo.png' %>", 320, 320);
    game.load.spritesheet('speachBubble', "<%= asset_path 'speach_bubble.png' %>", 320, 320);
}

function create() {
  //  Enable the Arcade Physics system
    game.physics.startSystem(Phaser.Physics.ARCADE);

    game.stage.backgroundColor = "#ffffff";
     // set the player sprite to variable and indicate what file (loaded above), and the starting xy.
    player = game.add.sprite(30, 500, 'alien');
    bubble = game.add.sprite(400, 335, 'speachBubble');

    // player.anchor.setTo(0.5, 0.5);
    // player.alpha = 0;

    // game.add.tween(player).to( { alpha: 1 }, 2000, Phaser.Easing.Linear.None, true, 0, 1000, true);

    var style = { font: "26px Arial", fill: "#fffff" };
    text = game.add.text(467, 400, "You can do it!", style);
        // this gives the player physics. How? Who knows.
    game.physics.arcade.enable(player);

    //  Physics properties for player.
    player.body.bounce.y = 0.5; //higher number, higher bounce
    player.body.gravity.y = 200; // higher number, jump higher.
    player.body.collideWorldBounds = true; //player can not leave screen. (go out of bounds)

    //  some how handles animations. Whatever.
    player.animations.add('wave', [0,1,2,3], 10);

    cursors = game.input.keyboard.createCursorKeys();


}

function update() {
   //  Without this the player falls through the platforms. Takes player game sprite object and platforms group as arguments.

        player.animations.play('wave');

}